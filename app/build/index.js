(()=>{async function h(){try{return await(await fetch("https://fakestoreapi.com/products/categories")).json()}catch(t){return console.error("error fetching categories:",t),[]}}var n=h;function s({id:t,name:e,description:o,quantity:a},r){r&&r.appendChild(s({id:t,name:e,description:o,quantity:a}));let c=document.createElement("div");return c.id=`product-${t}`,c.classList.add("product"),c.innerHTML=`
    <div class="wrapper" >
      <span class="product__name">${e}</span>
      <span class="product__description">${o}</span>
    </div>
    <input type="number" value="${a}" class="product__quantity"/>
  `,c}var i=s;async function E(t){try{return(await(await fetch(`https://fakestoreapi.com/products/category/${t}`)).json()).map(r=>(r.quantity=Math.floor(Math.random()*100),r.name=r.title,r.description=r.description.substring(0,100)+"...",r))}catch(e){return console.error("error fetching products on category:",e),[]}}var d=E;function C(t=document.querySelector(".category"),e){if(!(e.target.className=="category__name"))return;t.classList.toggle("category--toggle"),Array.from(t.children).forEach(r=>{r.classList.contains("category__name")||r.classList.toggle("product--toggle")})}var u=C;async function v(t){let e=document.createElement("div");return e.id=`category-${t}`,e.classList.add("category"),e.innerHTML=`<div class="category__name">${t}</div>`,(await d(t)).forEach(a=>{let r=i(a);e.appendChild(r)}),e}var l=v;async function _(){try{let t=document.querySelector("main"),e=await n();for(let o of e){let a=await l(o);t.appendChild(a)}}catch(t){console.error("Error rendering categories:",t)}}var p=_;function L(t){Array.from(document.querySelectorAll(".product")).forEach(o=>{o.querySelector(".product__name").textContent.includes(t)||t==""?o.classList.remove("product--desactive"):o.classList.add("product--desactive")})}var m=L;function w(){document.querySelector("#search__input").addEventListener("input",e=>{m(e.target.value)})}var f=w;function x(){Array.from(document.querySelectorAll(".category")).forEach(e=>{e.addEventListener("click",o=>u(e,o))})}var g=x;function y(){f(),g()}document.addEventListener("DOMContentLoaded",async()=>{await p(),y()});})();
