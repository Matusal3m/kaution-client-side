(()=>{async function y(){try{return await(await fetch("https://fakestoreapi.com/products/categories")).json()}catch(t){return console.error("error fetching categories:",t),[]}}var c=y;function h({id:t,name:e,description:o,quantity:a}){let r=document.createElement("div");return r.id=`product-${t}`,r.classList.add("product"),r.innerHTML=`
    <div class="wrapper" >
      <span class="product__name">${e}</span>
      <span class="product__description">${o}</span>
    </div>
    <input type="number" value="${a}" class="product__quantity"/>
  `,r}var s=h;async function C(t){try{return(await(await fetch(`https://fakestoreapi.com/products/category/${t}`)).json()).map(r=>(r.quantity=Math.floor(Math.random()*100),r.name=r.title,r.description=r.description.substring(0,100)+"...",r))}catch(e){return console.error("error fetching products on category:",e),[]}}var i=C;function E(t=document.querySelector(".category")){t.textContent,Array.from(t.parentElement.children).forEach(o=>{o.classList.contains("category__name")||o.classList.toggle("product--desactive")})}var d=E;async function _(t){let e=document.createElement("div");return e.id=`category-${t}`,e.classList.add("category"),e.innerHTML=`<div class="category__name">${t}</div>`,(await i(t)).forEach(a=>{let r=s(a);e.appendChild(r)}),e}var u=_;async function v(){try{let t=document.querySelector("main"),e=await c();for(let o of e){let a=await u(o);t.appendChild(a)}}catch(t){console.error("Error rendering categories:",t)}}var l=v;function w(t){let e=document.getElementsByClassName("product");return Array.from(e).filter(a=>{let n=a.querySelector(".product__name").textContent.toLowerCase().includes(t.toLowerCase());return a.classList.add(n?"product--isMatched":"product--isNotMatched"),n})}var m=w;function L(){document.querySelector("#search__input").addEventListener("input",e=>{m(e.target.value)})}var p=L;function x(){Array.from(document.querySelectorAll(".category__name")).forEach(e=>{e.addEventListener("click",()=>d(e))})}var f=x;function g(){p(),f()}document.addEventListener("DOMContentLoaded",async()=>{await l(),g()});})();
