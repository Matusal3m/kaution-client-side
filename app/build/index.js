(()=>{async function g(){try{return await(await fetch("https://fakestoreapi.com/products/categories")).json()}catch(e){return console.error("error fetching categories:",e),[]}}var n=g;function y({id:e,name:t,description:a,quantity:o}){let r=document.createElement("div");return r.id=`product-${e}`,r.classList.add("product"),r.innerHTML=`
    <div class="wrapper" >
      <span class="product__name">${t}</span>
      <span class="product__description">${a}</span>
    </div>
    <input type="number" value="${o}" class="product__quantity"/>
  `,r}var c=y;async function h(e){try{return(await(await fetch(`https://fakestoreapi.com/products/category/${e}`)).json()).map(r=>(r.quantity=Math.floor(Math.random()*100),r.name=r.title,r.description=r.description.substring(0,100)+"...",r))}catch(t){return console.error("error fetching products on category:",t),[]}}var s=h;function E(e=document.querySelector(".category"),t){if(!(t.target.className=="category__name"))return;e.classList.toggle("category--toggle"),Array.from(e.children).forEach(r=>{r.classList.contains("category__name")||r.classList.toggle("product--desactive")})}var i=E;async function C(e){let t=document.createElement("div");return t.id=`category-${e}`,t.classList.add("category"),t.innerHTML=`<div class="category__name">${e}</div>`,(await s(e)).forEach(o=>{let r=c(o);t.appendChild(r)}),t}var d=C;async function _(){try{let e=document.querySelector("main"),t=await n();for(let a of t){let o=await d(a);e.appendChild(o)}}catch(e){console.error("Error rendering categories:",e)}}var u=_;function v(e){let t=document.getElementsByClassName("product");return Array.from(t).filter(o=>{let P=o.querySelector(".product__name").textContent.toLowerCase().includes(e.toLowerCase());o.class})}var l=v;function w(){document.querySelector("#search__input").addEventListener("input",t=>{l(t.target.value)})}var m=w;function L(){Array.from(document.querySelectorAll(".category")).forEach(t=>{t.addEventListener("click",a=>i(t,a))})}var p=L;function f(){m(),p()}document.addEventListener("DOMContentLoaded",async()=>{await u(),f()});})();
