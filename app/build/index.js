(()=>{async function g(){try{return await(await fetch("http://localhost:3000/user/all/category")).json()}catch(t){return console.error("error fetching categories:",t),[]}}var a=g;function y({id:t,name:e,description:r,quantity:c}){let o=document.createElement("div");return o.id=`product-${t}`,o.classList.add("product"),o.innerHTML=`
    <div class="wrapper" >
      <span class="product__name">${e}</span>
      <span class="product__description">${r}</span>
    </div>
    <input type="number" value="${c}" class="product__quantity"/>
  `,o}var n=y;async function h(t){try{return await(await fetch(`http://localhost:3000/user/category/${t.id}/product`)).json()}catch(e){return console.error("error fetching products on category:",e),[]}}var s=h;async function E(t){let e=document.createElement("div");return e.id=`category-${t.name}`,e.classList.add("category"),e.innerHTML=`<div class="category__name">${t.name}</div>`,(await s(t)).forEach(c=>{let o=n(c);e.appendChild(o)}),e}var i=E;async function v(){try{let t=document.querySelector("main"),e=await a();for(let r of e){let c=await i(r);t.appendChild(c)}}catch(t){console.error("Error rendering categories:",t)}}var d=v;function _(t){Array.from(document.querySelectorAll(".product")).forEach(r=>{r.querySelector(".product__name").textContent.includes(t)||t==""?r.classList.remove("product--desactive"):r.classList.add("product--desactive")})}var u=_;function C(){document.querySelector("#search__input").addEventListener("input",e=>{u(e.target.value)})}var l=C;function L(t,e){if(!(e.target.className=="category__name"))return;t.classList.toggle("category--toggle"),Array.from(t.children).forEach(o=>{o.classList.contains("category__name")||o.classList.toggle("product--toggle")})}var p=L;function x(){Array.from(document.querySelectorAll(".category")).forEach(e=>{e.addEventListener("click",r=>p(e,r))})}var m=x;function f(){l(),m()}document.addEventListener("DOMContentLoaded",async()=>{await d(),f()});})();
